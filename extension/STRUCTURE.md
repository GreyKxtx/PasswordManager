# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### ‚úÖ 1. Shared –º–æ–¥—É–ª–∏ (`src/shared/`)

- **types.ts** - –í—Å–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:
  - `VaultItemEncrypted`, `VaultItemDecrypted`
  - `KdfParams`, `AuthTokens`, `LoginResponse`
  - `Message` —Ç–∏–ø—ã –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏

- **crypto.ts** - –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:
  - `computePasswordVerifier()` - Argon2id –¥–ª—è –ª–æ–≥–∏–Ω–∞
  - `derivePasswordKey()` - –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∫–ª—é—á–∞ –∏–∑ –ø–∞—Ä–æ–ª—è
  - `decryptVaultKey()` - –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ vault key
  - `encryptSecret()` / `decryptSecret()` - –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö vault
  - `extractDomain()` / `matchesDomain()` - –†–∞–±–æ—Ç–∞ —Å –¥–æ–º–µ–Ω–∞–º–∏

- **api.ts** - API –∫–ª–∏–µ–Ω—Ç –¥–ª—è backend:
  - `getLoginParams()` - –ü–æ–ª—É—á–µ–Ω–∏–µ KDF –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  - `login()` - –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `getVaultItems()` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π vault
  - `refreshToken()` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

### ‚úÖ 2. Background Script (`src/background/background.ts`)

**–°–æ—Å—Ç–æ—è–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏):**
- `accessToken`, `refreshToken` - —Ç–æ–∫–µ–Ω—ã (—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ storage)
- `vaultKey` - –∫–ª—é—á —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ (—Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏!)
- `vaultItems` - —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏
- `domainIndex` - –∏–Ω–¥–µ–∫—Å –ø–æ –¥–æ–º–µ–Ω–∞–º

**–§—É–Ω–∫—Ü–∏–∏:**
- `initialize()` - –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –∏–∑ storage
- `checkAuth()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- `performLogin()` - –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ª–æ–≥–∏–Ω–∞:
  1. –ü–æ–ª—É—á–µ–Ω–∏–µ KDF –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  2. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ passwordVerifier
  3. –õ–æ–≥–∏–Ω —á–µ—Ä–µ–∑ API
  4. –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ vaultKey
  5. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è vault
- `performLogout()` - –û—á–∏—Å—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `syncVault()` - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∑–∞–ø–∏—Å–µ–π
- `getEntriesForDomain()` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –¥–ª—è –¥–æ–º–µ–Ω–∞
- `getAllEntries()` - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π

**Message Handler:**
- `PING` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏
- `CHECK_AUTH` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `LOGIN` - –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `LOGOUT` - –í—ã—Ö–æ–¥
- `GET_ENTRIES_FOR_DOMAIN` - –ó–∞–ø–∏—Å–∏ –¥–ª—è –¥–æ–º–µ–Ω–∞
- `GET_ALL_ENTRIES` - –í—Å–µ –∑–∞–ø–∏—Å–∏
- `SYNC_VAULT` - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

### ‚úÖ 3. Popup UI (`src/popup/`)

**–≠–∫—Ä–∞–Ω—ã:**
- **–õ–æ–≥–∏–Ω** (`login-screen`):
  - –ü–æ–ª—è: email, –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—å
  - –ö–Ω–æ–ø–∫–∞ "–í–æ–π—Ç–∏"
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- **–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω** (`unlocked-screen`):
  - –¢–µ–∫—É—â–∏–π –¥–æ–º–µ–Ω
  - –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π –¥–ª—è –¥–æ–º–µ–Ω–∞
  - –ö–Ω–æ–ø–∫–∏: "–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–∏—Ç—å", "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å"
  - –î–µ–π—Å—Ç–≤–∏—è: "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å", "–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"

- **–í—Å–µ –∑–∞–ø–∏—Å–∏** (`all-entries-screen`):
  - –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π
  - –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"

**–§—É–Ω–∫—Ü–∏–∏:**
- `checkAuthOnLoad()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- `loadCurrentDomainEntries()` - –ó–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –¥–æ–º–µ–Ω–∞
- `loadAllEntries()` - –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π
- `autofillEntry()` - –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
- `copyPassword()` - –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä

### ‚úÖ 4. Content Script (`src/content/content.ts`)

**–§—É–Ω–∫—Ü–∏–∏:**
- `findFormFields()` - –ü–æ–∏—Å–∫ –ø–æ–ª–µ–π –ª–æ–≥–∏–Ω–∞/–ø–∞—Ä–æ–ª—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- `createAutofillIcon()` - –°–æ–∑–¥–∞–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ üîê
- `createDropdownMenu()` - –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é —Å –∑–∞–ø–∏—Å—è–º–∏
- `autofillForm()` - –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã
- `injectAutofillIcons()` - –í—Å—Ç–∞–≤–∫–∞ –∏–∫–æ–Ω–æ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ —Ñ–æ—Ä–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π DOM (–¥–ª—è SPA)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç popup –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è

### ‚úÖ 5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **manifest.json** - –ú–∞–Ω–∏—Ñ–µ—Å—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (Manifest V3)
- **tsconfig.json** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TypeScript
- **package.json** - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ **vaultKey —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏** background script  
‚úÖ –¢–æ–∫–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `chrome.storage.local`  
‚úÖ –í—Å–µ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ  
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—Ç –∂–µ –ø—Ä–æ—Ç–æ–∫–æ–ª, —á—Ç–æ –∏ –≤–µ–±-–∫–ª–∏–µ–Ω—Ç  

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `npm install`
2. –°–æ–∑–¥–∞—Ç—å –∏–∫–æ–Ω–∫–∏ –≤ `icons/`
3. –°–æ–±—Ä–∞—Ç—å: `npm run build`
4. –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ Chrome: `chrome://extensions/`

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å `http://localhost:3000` (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ `api.ts`)
- –î–ª—è production –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å `API_BASE_URL` –∏ –¥–æ–±–∞–≤–∏—Ç—å CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ backend
- –ò–∫–æ–Ω–∫–∏ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ PNG —Ñ–∞–π–ª—ã

