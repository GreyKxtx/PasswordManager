Хорошо, давай сделаем тебе карту фронта, чтобы не приходилось придумывать страницы «на коленке» во время верстки.

Ниже:

1. **Минимальный набор страниц (MVP), который обязателен**
2. **Расширения/подстраницы внутри этих блоков**
3. **Отдельно для браузерного расширения (popup + options)**

Буду писать так, чтобы ты мог почти 1-в-1 перенести в роутинг и компоненты.

---

## 1. Общая структура роутов SPA

Предлагаю такую топологию:

* `/auth`

  * `/auth/login`
  * `/auth/register`
  * `/auth/2fa`
* `/vault`
* `/vault/backup`
* `/settings`

  * `/settings/profile`
  * `/settings/security`
  * `/settings/devices`
  * `/settings/audit`

Плюс технические:

* `/` → редирект либо на `/vault`, либо на `/auth/login`
* `**` → страница 404 (по желанию, но лучше сразу сделать)

---

## 2. Страницы аутентификации

### 2.1. `/auth/login` – Страница входа

**Назначение:**
Вход по email + пароль, старт для WebAuthn, начало цепочки 2FA.

**Основные блоки:**

* Форма:

  * `email`
  * `пароль` (с переключателем "показать/скрыть")
  * чекбокс: `Запомнить это устройство` (для refresh токена / "remember me")
* Кнопки:

  * `Войти`
  * Линк: `У меня нет аккаунта` → `/auth/register`
* Дополнительно:

  * Кнопка/линк `Войти с помощью ключа безопасности (WebAuthn)`
    → дергает WebAuthn-флоу
* Ошибки:

  * неправильный пароль
  * пользователь не найден
  * заблокированная учетная запись (если будешь делать)

**Компоненты:**

* `LoginFormComponent`
* Использует `AuthService`, `SessionService`, `ApiService`.

---

### 2.2. `/auth/register` – Регистрация

**Назначение:**
Создание аккаунта и установка мастер-пароля.

**Основные блоки:**

* Форма:

  * `email`
  * `имя` (опционально, но красиво)
  * `мастер-пароль`
  * `подтверждение мастер-пароля`
* Инфо-блок:

  * краткое объяснение, что мастер-пароль нельзя восстановить, и от него зависит всё
* Кнопки:

  * `Создать аккаунт`
  * Линк: `У меня уже есть аккаунт` → `/auth/login`

**Компоненты:**

* `RegisterFormComponent`
* Внутри можно сразу дергать KDF (Argon2id) и считать verifier / шифровать vaultKey.

---

### 2.3. `/auth/2fa` – Подтверждение двухфакторки

**Назначение:**
Промежуточный шаг после успешного логина по паролю, если включена 2FA (TOTP или WebAuthn).

**Основные блоки:**

* Режим TOTP:

  * поле для `6-значного кода`
  * таймер «код истекает через ...»
  * кнопка `Подтвердить`
* Режим WebAuthn:

  * кнопка `Использовать ключ безопасности`
* Линк:

  * `Войти другим способом` (например, смена метода 2FA, если есть резервные коды)

**Компоненты:**

* `TwoFactorFormComponent`
* Использует `AuthService` + WebAuthn сервис.

---

## 3. Страницы хранилища (Vault)

### 3.1. `/vault` – Главная страница после логина

Это твой основной рабочий экран. Сделай его нормальным, сюда пользователь будет смотреть чаще всего.

**Рекомендуемая структура:**

**Лэйаут:**

* Саб-Layout `MainLayoutComponent`:

  * Слева: сайдбар (иконки: Vault, Settings)
  * Сверху: топбар:

    * логотип / название
    * глобальный поиск по записям
    * кнопка `+ Добавить запись`
    * иконка пользователя / меню профиля (`Профиль`, `Выйти`)

**Контентная часть `/vault`:**

1. **Toolbar над списком**

   * Поле `Поиск` (по названию/домену)
   * Фильтры: категории (Логины, Банковские карты, Заметки, Другое)
   * Переключатель вида: таблица / карточки (опционально)
   * Кнопка: `Импорт/Экспорт` (можно вести на `/vault/backup` или открывать модалку)

2. **Список записей (или таблица)**

   * Колонки:

     * Имя записи
     * Домен / URL
     * Логин/username
     * Теги
     * Последнее использование / обновление
   * Иконки:

     * быстрое копирование пароля / логина
     * переход к сайту
   * Клик по строке → модалка или переход на `/vault/:id/edit` (но я бы сделал модалку, чтобы не плодить лишний роут).

3. **Правая панель (по желанию)**

   * Детали выбранной записи:

     * название
     * логин
     * пароль (по клику показывать)
     * URL (с кнопкой перейти)
     * заметки
     * история изменений (если будешь делать)
   * Кнопки:

     * `Редактировать`
     * `Удалить`

**Компоненты:**

* `VaultListComponent`
* `VaultItemPreviewComponent`
* `VaultItemEditDialogComponent` (модалка)
* `SearchBarComponent`

---

### 3.2. Создание / редактирование записи

Ты можешь делать как:

* Отдельный роут `/vault/new` и `/vault/:id/edit`, **или**
* Модалки поверх `/vault`.

Для Angular проще и аккуратнее сделать модалки в том же модуле `vault`, но я дам структуру как будто есть отдельная страница:

**Роут (опционально):** `/vault/new`, `/vault/:id/edit`

**Содержимое экрана/модалки:**

* Поля:

  * `Название`
  * `URL / Домен`
  * `Логин / Email`
  * `Пароль` + кнопка `Генерировать` + индикатор сложности
  * `Заметки`
  * `Теги`
  * `Тип записи` (аккаунт/карта/заметка/другое)
* Кнопки:

  * `Сохранить`
  * `Отмена`
* Секционные мелочи:

  * блок "Генератор пароля": длина, набор символов

**Компоненты:**

* `VaultItemFormComponent`
* `PasswordGeneratorComponent`

---

### 3.3. `/vault/backup` – Резервное копирование и восстановление

Можно сделать как отдельную страницу, чтобы ты не лепил это в 200 мест.

**Основные блоки:**

1. **Экспорт**

   * Кнопка `Скачать зашифрованный backup`
   * короткий текст: backup зашифрован Vault Key, расшифровать можно только при знании мастер-пароля.

2. **Импорт**

   * Загрузка файла backup
   * Поле ввода мастер-пароля (если нужно для расшифровки)
   * Кнопка `Импортировать`
   * Предупреждение:

     * перезаписывать ли существующие записи
     * или добавлять как новые

3. **Безопасность**

   * инфоблок: "Не храните backup в открытом виде", бла-бла для кафедры.

**Компоненты:**

* `BackupRestoreComponent`
* Внутри 2 сабкомпонента: `BackupExportComponent`, `BackupImportComponent`.

---

## 4. Страницы настроек

Все настройки логично держать под `/settings` с табами или сайдбаром.

### 4.1. `/settings/profile` – Профиль

**Назначение:**
Минимальный «личный кабинет» без лишнего фанатизма.

**Блоки:**

* Личная информация:

  * Имя
  * Email (read-only)
* Настройки интерфейса:

  * Язык
  * Тема (светлая/темная/системная)
* Кнопки:

  * `Сохранить изменения`

**Компоненты:**

* `ProfileSettingsComponent`

---

### 4.2. `/settings/security` – Безопасность

Это жирная важная страница.

**Блоки:**

1. **Мастер-пароль**

   * Кнопка `Изменить мастер-пароль`
   * Форма:

     * старый пароль
     * новый пароль
     * подтверждение
   * Текст про то, что смена мастер-пароля приведёт к перешифровке ключа (если делаешь).

2. **2FA (TOTP)**

   * Статус: включена / выключена
   * Кнопка `Включить TOTP`

     * Пошаговый setup:

       * QR-код
       * код восстановления (опционально)
       * поле ввода 6-значного кода для подтверждения
   * Кнопка `Отключить 2FA` (с подтверждением паролем).

3. **WebAuthn**

   * Список зарегистрированных ключей/устройств:

     * название (user-agent / "YubiKey ...")
     * дата добавления
   * Кнопка `Добавить ключ безопасности`
   * Кнопка `Удалить` конкретный ключ

4. **Настройки блокировки**

   * `Автоматическая блокировка через N минут бездействия`
   * Переключатель «Требовать мастер-пароль при разблокировке»

**Компоненты:**

* `SecuritySettingsComponent`
* Внутри:

  * `ChangeMasterPasswordComponent`
  * `TotpSettingsComponent`
  * `WebauthnSettingsComponent`

---

### 4.3. `/settings/devices` – Устройства и сессии

**Назначение:**
Отображает все активные сессии и устройства, возможность их завершать.

**Блоки:**

* Таблица сессий:

  * Название устройства (user-agent)
  * IP
  * Примерное местоположение (если будешь добавлять)
  * Дата создания сессии
  * Последняя активность
  * Метка: `Текущая сессия`
* Кнопки:

  * `Завершить` для каждой сессии
  * `Завершить все, кроме текущей`

**Компоненты:**

* `DevicesSessionsComponent`
* `SessionRowComponent`

---

### 4.4. `/settings/audit` – Логи безопасности

**Назначение:**
Показывает важные события: логины, ошибки 2FA, смена пароля, экспорт backup, включение/отключение 2FA и т.п.

**Блоки:**

* Фильтры:

  * Тип события (login, logout, 2FA, export, import, security-change)
  * Диапазон дат
* Таблица логов:

  * Дата/время
  * Тип события
  * Описание (например, «Успешный вход», «Неудачный вход (неверный пароль)»)
  * IP / устройство
* Никаких кнопок модификации, только чтение.

**Компоненты:**

* `AuditLogComponent`

---

## 5. Технические страницы

### 5.1. 404 и прочее

* `NotFoundComponent` для `**` роута, минимальный.
* `ErrorBoundary` можно не делать, но:

  * страница `Ошибка подключения к серверу` или глобальный `Snackbar` для фатальных ошибок тоже не помешает.

---

## 6. Для браузерного расширения

Ты еще не просил, но давай, чтобы потом не вспоминать «что там надо» для popup.

### 6.1. Popup (главное окно расширения)

**Структура:**

* Поле поиска
* Список записей (только основные поля: название, домен, логин)
* Кнопки:

  * `Заполнить форму` (для текущего сайта)
  * `Открыть в веб-приложении`
* Если расширение заблокировано:

  * экран ввода мастер-пароля / PIN
  * после успешного ввода в фоне грузится/дешифруется vaultKey.

### 6.2. Options page

* Настройки подключения к API (если нужны кастомные урлы, но можно зашить).
* Настройки автозаполнения:

  * включено/выключено
  * автофокус / автосабмит
* Привязка к аккаунту:

  * показать email
  * кнопка `Выйти`

---

## 7. Если собрать в компактный список

Чтобы тебе было проще сделать роутинг и компоненты:

**Основные страницы SPA:**

1. `/auth/login` – LoginPage
2. `/auth/register` – RegisterPage
3. `/auth/2fa` – TwoFactorPage
4. `/vault` – VaultPage (список + просмотр + модалки создания/редактирования)
5. `/vault/backup` – BackupRestorePage
6. `/settings/profile` – ProfileSettingsPage
7. `/settings/security` – SecuritySettingsPage
8. `/settings/devices` – DevicesSessionsPage
9. `/settings/audit` – AuditLogPage
10. `**` – NotFoundPage

Этого более чем достаточно, чтобы:

* соответствовать ТЗ,
* сделать дипломной комиссии красиво,
* самому не утонуть в хаосе.

Если хочешь, дальше можно уже сверху навешивать конкретный Angular-роутинг и названия компонентов/модулей, но логика страниц у тебя теперь есть.
